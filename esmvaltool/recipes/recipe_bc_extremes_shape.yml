# ESMValTool
# recipe_example_r.yml
---
documentation:
  description: Figure for cross-chapter box 3_2 IPCC AR6 report.

  authors:
    - malinina_elizaveta

preprocessors:
  preproc_max:
    custom_order: True
    extract_shape:
      shapefile: 'british_columbia.shp'
      method: 'contains'
      crop: True
    annual_statistics:
      operator: max
  preproc_shape:
    preproc_region:
      extract_shape:
        shapefile: 'british_columbia.shp'
        method: 'contains'
        crop: True

models_tasmax: &models_tasmax
# CMIP6
  - {dataset: ACCESS-CM2, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:3)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: ACCESS-ESM1-5, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:6)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: ACCESS-ESM1-5, project: CMIP6, exp: [historical, ssp245], ensemble: "r(8:10)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: AWI-CM-1-1-MR, project: CMIP6, exp: [historical, ssp245], ensemble: r1i1p1f1, grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: CanESM5, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:25)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: CanESM5, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:25)i1p2f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: CAMS-CSM1-0, project: CMIP6, exp: [historical, ssp245], ensemble: r2i1p1f1, grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: CNRM-CM6-1, project: CMIP6, exp: [historical, ssp245], ensemble: r1i1p1f2, grid: gr, start_year: 2010, end_year: 2017}
  - {dataset: CNRM-ESM2-1, project: CMIP6, exp: [historical, ssp245], ensemble: r1i1p1f2, grid: gr, start_year: 2010, end_year: 2017}
  - { dataset: EC-Earth3, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:2)i1p1f1", grid: gr, start_year: 2010, end_year: 2017 }
  - { dataset: EC-Earth3, project: CMIP6, exp: [historical, ssp245], ensemble: r4i1p1f1, grid: gr, start_year: 2010, end_year: 2017 }
  - { dataset: EC-Earth3, project: CMIP6, exp: [historical, ssp245], ensemble: "r(6:7)i1p1f1", grid: gr, start_year: 2010, end_year: 2017 }
  - { dataset: EC-Earth3, project: CMIP6, exp: [historical, ssp245], ensemble: "r(9:10)i1p1f1", grid: gr, start_year: 2010, end_year: 2017 }
  - { dataset: EC-Earth3, project: CMIP6, exp: [ historical, ssp245 ], ensemble: r14i1p1f1, grid: gr, start_year: 2010, end_year: 2017 }
  - { dataset: EC-Earth3, project: CMIP6, exp: [ historical, ssp245 ], ensemble: "r(21:25)i1p1f1", grid: gr, start_year: 2010, end_year: 2017 }
  - { dataset: EC-Earth3-CC, project: CMIP6, exp: [historical, ssp245], ensemble: r1i1p1f1, grid: gr, start_year: 2010, end_year: 2017 }
  - { dataset: EC-Earth3-Veg, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:6)i1p1f1", grid: gr, start_year: 2010, end_year: 2017 }
  - { dataset: EC-Earth3-Veg-LR, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:3)i1p1f1", grid: gr, start_year: 2010, end_year: 2017 }
  - { dataset: GFDL-ESM4, project: CMIP6, exp: [historical, ssp245], ensemble: r1i1p1f1, grid: gr1, start_year: 2010, end_year: 2017 }
  - { dataset: HadGEM3-GC31-LL, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:4)i1p1f3", grid: gn, start_year: 2010, end_year: 2017 }
  - { dataset: INM-CM4-8, project: CMIP6, exp: [historical, ssp245], ensemble: r1i1p1f1, grid: gr1, start_year: 2010, end_year: 2017 }
  - { dataset: INM-CM5-0, project: CMIP6, exp: [historical, ssp245], ensemble: r1i1p1f1, grid: gr1, start_year: 2010, end_year: 2017 }
  - { dataset: IPSL-CM6A-LR, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:6)i1p1f1", grid: gr, start_year: 2010, end_year: 2017 }
  - {dataset: KACE-1-0-G, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:3)i1p1f1", grid: gr, start_year: 2010, end_year: 2017}
  - {dataset: MIROC6, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:50)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: MPI-ESM1-2-HR, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:2)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: MPI-ESM1-2-LR, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:10)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: MRI-ESM2-0, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:5)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - { dataset: NESM3, project: CMIP6, exp: [historical, ssp245], ensemble: r1i1p1f1, grid: gn, start_year: 2010, end_year: 2017 }
  - { dataset: NorESM2-LM, project: CMIP6, exp: [ historical, ssp245 ], ensemble: "r(2:3)i1p1f1", grid: gn, start_year: 2010, end_year: 2017 }
  - { dataset: NorESM2-MM, project: CMIP6, exp: [ historical, ssp245 ], ensemble: "r(1:2)i1p1f1", grid: gn, start_year: 2010, end_year: 2017 }
  - { dataset: UKESM1-0-LL, project: CMIP6, exp: [historical, ssp245], ensemble: "r(1:4)i1p1f2", grid: gn, start_year: 2010, end_year: 2017 }
  - { dataset: UKESM1-0-LL, project: CMIP6, exp: [historical, ssp245], ensemble: r8i1p1f2, grid: gn, start_year: 2010, end_year: 2017 }
  # hist-nat
  - {dataset: ACCESS-ESM1-5, project: CMIP6, exp: hist-nat, ensemble: "r(1:3)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: BCC-CSM2-MR, project: CMIP6, exp: hist-nat, ensemble: "r(1:3)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: CanESM5, project: CMIP6, exp: hist-nat, ensemble: "r(1:10)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: CNRM-CM6-1, project: CMIP6, exp: hist-nat, ensemble: "r(1:3)i1p1f2", grid: gr, start_year: 2010, end_year: 2017}
  - { dataset: FGOALS-g3, project: CMIP6, exp: hist-nat, ensemble: r1i1p1f1, grid: gn, start_year: 2010, end_year: 2017 }
  - {dataset: HadGEM3-GC31-LL, project: CMIP6, exp: hist-nat, ensemble: "r(1:4)i1p1f3", grid: gn, start_year: 2010, end_year: 2017}
  - {dataset: IPSL-CM6A-LR, project: CMIP6, exp: hist-nat, ensemble: "r(1:2)i1p1f1", grid: gr, start_year: 2010, end_year: 2017}
  - {dataset: IPSL-CM6A-LR, project: CMIP6, exp: hist-nat, ensemble: "r(4:7)i1p1f1", grid: gr, start_year: 2010, end_year: 2017}
  - { dataset: MIROC6, project: CMIP6, exp: hist-nat, ensemble: "r(1:3)i1p1f1", grid: gn, start_year: 2010, end_year: 2017 }
  - {dataset: MRI-ESM2-0, project: CMIP6, exp: hist-nat, ensemble: "r(1:5)i1p1f1", grid: gn, start_year: 2010, end_year: 2017}

measurements: &measurements
  - { dataset: HadEX3, project: OBS, frequency: yr, tier: 2, type: clim, version: v20200928, start_year: 2010, end_year: 2017}

diagnostics:
  xcbox32:
    description: Figure for BC extremes
    variables:
      txx:
        mip: yr
        preprocessor: preproc_shape
        additional_datasets:
          *measurements
      tasmax:
        mip: day
        preprocessor: preproc_max
        additional_datasets:
          *models_tasmax
    scripts:
      xcbox32:
        script: extreme_events/extremes_bc_txx_pdfs.py
        mpl_style: ipcc_ar6_fgd
